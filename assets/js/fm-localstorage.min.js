/**
 * @providesModule fm-localstorage - LocalStorage
 * @author ifootmark@163.com
 * @version v1.0.0
 * @link https://ifootmark.github.io/fm-localstorage/
 * @license MIT
 * @time 2016-6-28 15:48:38
 */
"use strict";var localDataStore={hname:location.hostname?location.hostname:"localStatus",isLocalStorage:!(!window.localStorage||!window.localStorage.getItem),dataDom:null,initDom:function(){if(!this.dataDom)try{this.dataDom=document.createElement("input"),this.dataDom.type="hidden",this.dataDom.style.display="none",this.dataDom.addBehavior("#default#userData"),document.body.appendChild(this.dataDom);var t=new Date;t=t.getDate()+365,this.dataDom.expires=t.toUTCString()}catch(e){return!1}return!0},set:function(t,e){this.isLocalStorage?window.localStorage.setItem(t,e):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.setAttribute(t,e),this.dataDom.save(this.hname))},get:function(t){return this.isLocalStorage?window.localStorage.getItem(t):this.initDom()?(this.dataDom.load(this.hname),this.dataDom.getAttribute(t)):void 0},remove:function(t){this.isLocalStorage?window.localStorage.removeItem(t):this.initDom()&&(this.dataDom.load(this.hname),this.dataDom.removeAttribute(t),this.dataDom.save(this.hname))},clear:function(){this.isLocalStorage&&window.localStorage.clear()}},DS={set:function(t,e,a){t&&(a&&(e.expire=currentTime()+1e3*a),localDataStore.set("ift_"+t,JSON.stringify(e)))},get:function(t){var e=localDataStore.get("ift_"+t);return e&&(e=JSON.parse(e),e.expire&&e.expire<currentTime()&&(e=null)),e},getAll:function(){var t={};t.list=[];var e=Object.keys(window.localStorage);return e.forEach(function(e){if(e.indexOf("ift_")>=0){var a=localDataStore.get(e);a&&(a=JSON.parse(a),a.expire&&a.expire<currentTime()&&(a=null)),a&&t.list.push(a)}}),t},remove:function(t){return localDataStore.remove("ift_"+t)},clear:function(){return localDataStore.clear()}},currentTime=function(){return(new Date).getTime()};!function(t,e){"function"==typeof define&&define.amd?define("DS",[],e):"object"==typeof module&&module.exports?module.exports=e:t.DS=e}(this,DS);